
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data Hands-on &#8212; Applied Network Analysis in Learning</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ch6-network-data-handson';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sociograms, Density, and Network Connectivity" href="ch7-sociograms-density.html" />
    <link rel="prev" title="Understanding Network Data Structures" href="ch6-understand-data-structures.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Applied Network Analysis in Learning - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Applied Network Analysis in Learning - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">0. Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch1-intro.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch1-setup-colab.html">Use Jupyter Notebooks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">1. Networks in Learning Analytics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch2-networks-la.html">Networks in Learning Analytics</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">2. Learning in Networks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch3-learning-in-networks.html">Learning in networks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">3. Network Science</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch4-network-science.html">Network Science</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch4-lab-read-data-1.html">Getting Started with Network Data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">4. SNA Theory and Concepts</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch5-sna-intro.html">Social Network Analysis: Theory and Concepts</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">5. Collect and Manage Network Data</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch6-collect-manage-data.html">Collect and Manage Network Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch6-understand-data-structures.html">Understanding Network Data Structures</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Data Hands-on</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">6. Sociograms and Density</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch7-sociograms-density.html">Sociograms, Density, and Network Connectivity</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">7. Centrality and Centralization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch8-centrality-positions.html">Positions and Influence</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">8. Components, Cliques, Communities</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch9-components.html">Components, Cliques, Communities</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">9. Ego Networks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch10-ego-networks.html">Ego Networks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">10. Cognitive and Semantic Networks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch11-cognitive-semantic-networks.html">Cognitive and Semantic Networks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">11. Inferential Network Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ch11-inferential-network-analysis.html">Inferential Network Analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Biblography</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/penn-wonderlab/networks_book/blob/master/ch6-network-data-handson.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/penn-wonderlab/networks_book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/penn-wonderlab/networks_book/issues/new?title=Issue%20on%20page%20%2Fch6-network-data-handson.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/ch6-network-data-handson.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Data Hands-on</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#read-data-and-preparing-data-for-networkx">Read data and preparing data for NetworkX</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-reading-well-formatted-network-data-from-csv">Example 1: Reading Well-formatted Network Data from CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-analyzing-learner-interactions-in-mooc-discussion-forums">Example 2: Analyzing Learner Interactions in MOOC Discussion Forums</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-first-load-the-mooc-dataset-and-take-a-look">Let’s first load the MOOC dataset and take a look</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-prep">Data prep</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prepare-nodes">Prepare nodes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prepare-edges">Prepare edges</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-directed-network-from-data">Create a directed network from data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#weighted-directed-network">Weighted directed network</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#created-a-new-edge-list-data-frame-with-a-weight-column">Created a new edge list data frame with a <code class="docutils literal notranslate"><span class="pre">weight</span></code> column</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#created-a-weighted-directed-network">Created a weighted directed network</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-3-importing-twitter-conversations-at-lak11">Example 3: Importing Twitter Conversations at #LAK11</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="data-hands-on">
<h1>Data Hands-on<a class="headerlink" href="#data-hands-on" title="Link to this heading">#</a></h1>
<p>This Jupyter Notebook demonstrate a few examples of reading and preparing data for network analysis.</p>
<p>Python code is provided below to help you get started but you may need to make revisions to make it work for the particular dataset you work with.</p>
<section id="read-data-and-preparing-data-for-networkx">
<h2>Read data and preparing data for NetworkX<a class="headerlink" href="#read-data-and-preparing-data-for-networkx" title="Link to this heading">#</a></h2>
<p>In NetworkX, you can read network data from different formats, such as <code class="docutils literal notranslate"><span class="pre">adjascency</span> <span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">adjascency</span> <span class="pre">matrix</span></code>, <code class="docutils literal notranslate"><span class="pre">edge</span> <span class="pre">list</span></code>, etc.</p>
<p>In order to read data into NetworkX, you need to first transform your data into a proper format that is acceptable for NetworkX. This process applies to any other SNA software packages.</p>
<p>See <a class="reference external" href="https://networkx.org/documentation/stable/reference/readwrite/index.html">this NetworkX reference page</a> for details.</p>
</section>
<section id="example-1-reading-well-formatted-network-data-from-csv">
<h2>Example 1: Reading Well-formatted Network Data from CSV<a class="headerlink" href="#example-1-reading-well-formatted-network-data-from-csv" title="Link to this heading">#</a></h2>
<p>In this example, we read an open dataset named <a class="reference external" href="https://networks.skewed.de/net/7th_graders">Vickers 7th Graders (1981)</a>. Check out the dataset page for more information.</p>
<p>The network data can be downloaded as a ZIP file that contains nodes and edges.</p>
<p>Below, we read the ZIP file directly from the website and then extract these CSV files for network construction.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span><span class="o">,</span> <span class="nn">zipfile</span><span class="o">,</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://networks.skewed.de/net/7th_graders/files/7th_graders.csv.zip&#39;</span>
<span class="n">edges_file</span> <span class="o">=</span> <span class="s1">&#39;edges.csv&#39;</span>
<span class="n">nodes_file</span> <span class="o">=</span> <span class="s1">&#39;nodes.csv&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
<span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">()</span>

<span class="n">nodes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">nodes_file</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span><span class="o">.</span><span class="n">set_axis</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span> <span class="c1"># rename the columns</span>
<span class="n">nodes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>name</th>
      <th>position</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>NaN</td>
      <td>array([-1.25328431, -5.19582831])</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>NaN</td>
      <td>array([-1.17175257, -5.39938108])</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>NaN</td>
      <td>array([-1.04017448, -5.48106062])</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>NaN</td>
      <td>array([-1.07294196, -5.61418605])</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>NaN</td>
      <td>array([-1.36638259, -5.48876888])</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>NaN</td>
      <td>array([-1.26042538, -5.47973283])</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6</td>
      <td>NaN</td>
      <td>array([-0.94831916, -5.36563054])</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7</td>
      <td>NaN</td>
      <td>array([-1.33077439, -5.4211611 ])</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8</td>
      <td>NaN</td>
      <td>array([-1.33161904, -5.59167846])</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9</td>
      <td>NaN</td>
      <td>array([-1.17888983, -5.62070043])</td>
    </tr>
    <tr>
      <th>10</th>
      <td>10</td>
      <td>NaN</td>
      <td>array([-1.25979885, -5.36942177])</td>
    </tr>
    <tr>
      <th>11</th>
      <td>11</td>
      <td>NaN</td>
      <td>array([-1.16099435, -5.26591003])</td>
    </tr>
    <tr>
      <th>12</th>
      <td>12</td>
      <td>NaN</td>
      <td>array([-1.47551501, -5.56898687])</td>
    </tr>
    <tr>
      <th>13</th>
      <td>13</td>
      <td>NaN</td>
      <td>array([-1.44937462, -5.27609678])</td>
    </tr>
    <tr>
      <th>14</th>
      <td>14</td>
      <td>NaN</td>
      <td>array([-1.47503673, -5.19523579])</td>
    </tr>
    <tr>
      <th>15</th>
      <td>15</td>
      <td>NaN</td>
      <td>array([-1.34305148, -5.30624285])</td>
    </tr>
    <tr>
      <th>16</th>
      <td>16</td>
      <td>NaN</td>
      <td>array([-1.57709797, -5.191396  ])</td>
    </tr>
    <tr>
      <th>17</th>
      <td>17</td>
      <td>NaN</td>
      <td>array([-1.38360822, -5.76487804])</td>
    </tr>
    <tr>
      <th>18</th>
      <td>18</td>
      <td>NaN</td>
      <td>array([-1.56234605, -5.28175874])</td>
    </tr>
    <tr>
      <th>19</th>
      <td>19</td>
      <td>NaN</td>
      <td>array([-1.51655974, -5.3567369 ])</td>
    </tr>
    <tr>
      <th>20</th>
      <td>20</td>
      <td>NaN</td>
      <td>array([-1.3609869, -5.2106605])</td>
    </tr>
    <tr>
      <th>21</th>
      <td>21</td>
      <td>NaN</td>
      <td>array([-1.4339152 , -5.36211952])</td>
    </tr>
    <tr>
      <th>22</th>
      <td>22</td>
      <td>NaN</td>
      <td>array([-1.47547163, -5.43990738])</td>
    </tr>
    <tr>
      <th>23</th>
      <td>23</td>
      <td>NaN</td>
      <td>array([-1.60111353, -5.39505365])</td>
    </tr>
    <tr>
      <th>24</th>
      <td>24</td>
      <td>NaN</td>
      <td>array([-1.52556491, -5.74985098])</td>
    </tr>
    <tr>
      <th>25</th>
      <td>25</td>
      <td>NaN</td>
      <td>array([-1.67574528, -5.44971572])</td>
    </tr>
    <tr>
      <th>26</th>
      <td>26</td>
      <td>NaN</td>
      <td>array([-1.68245577, -5.31040503])</td>
    </tr>
    <tr>
      <th>27</th>
      <td>27</td>
      <td>NaN</td>
      <td>array([-1.55409141, -5.49705225])</td>
    </tr>
    <tr>
      <th>28</th>
      <td>28</td>
      <td>NaN</td>
      <td>array([-1.61097712, -5.57691642])</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edges</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">edges_file</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="n">edges</span> <span class="o">=</span> <span class="n">edges</span><span class="o">.</span><span class="n">set_axis</span><span class="p">([</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="s1">&#39;layer&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span> <span class="c1"># rename the columns</span>
<span class="n">edges</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>source</th>
      <th>target</th>
      <th>weight</th>
      <th>layer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>5</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>7</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>10</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>11</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>13</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>735</th>
      <td>28</td>
      <td>12</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>736</th>
      <td>28</td>
      <td>22</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>737</th>
      <td>28</td>
      <td>23</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>738</th>
      <td>28</td>
      <td>26</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>739</th>
      <td>28</td>
      <td>27</td>
      <td>1</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
<p>740 rows × 4 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edges_layer1</span> <span class="o">=</span> <span class="n">edges</span><span class="p">[</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;layer&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span> 
</pre></div>
</div>
</div>
</div>
<p>Note in this network is <em>directed</em> and <em>multiplex</em> – meaning there are different types of edges.</p>
<p>According to the page, “Students nominated classmates for three different activities (who do you get on with in the class, who are your best friends, and who would you prefer to work with).” Each type of edges is distinguished by the <code class="docutils literal notranslate"><span class="pre">layer</span></code> column in the edge list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DG</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="c1"># Add nodes -- let&#39;s add each node on by one and store &#39;position&#39; as a node attribute</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">nodes</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">DG</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">],</span> <span class="n">position</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">])</span>

<span class="c1"># Add edges with attributes from the DataFrame to the graph</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">edges_layer1</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">DG</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">],</span> <span class="n">weight</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span> <span class="n">layer</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;layer&#39;</span><span class="p">])</span>

<span class="c1"># Generate a quick network visualization</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">DG</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/dd1645ba215d411a6aae46bcb7652b2e3c3726e9cc34b40255ebfa44551baa41.png" src="_images/dd1645ba215d411a6aae46bcb7652b2e3c3726e9cc34b40255ebfa44551baa41.png" />
</div>
</div>
<p>Congratulations, you have successfully imported the dataset to networkx!</p>
</section>
<section id="example-2-analyzing-learner-interactions-in-mooc-discussion-forums">
<h2>Example 2: Analyzing Learner Interactions in MOOC Discussion Forums<a class="headerlink" href="#example-2-analyzing-learner-interactions-in-mooc-discussion-forums" title="Link to this heading">#</a></h2>
<p>In this example, we’ve taken the data from the forums of a previous iteration of the MOOC <em>Big Data
and Education</em>, from week 1.</p>
<p>The data set has four columns:</p>
<ul class="simple">
<li><p>the post ID,</p></li>
<li><p>the poster’s ID,</p></li>
<li><p>the thread the post was in, and</p></li>
<li><p>which post this post was a response to</p></li>
</ul>
<section id="let-s-first-load-the-mooc-dataset-and-take-a-look">
<h3>Let’s first load the MOOC dataset and take a look<a class="headerlink" href="#let-s-first-load-the-mooc-dataset-and-take-a-look" title="Link to this heading">#</a></h3>
<p>Let’s read it in to a pandas dataframe and inspect its content.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://learninganalytics.upenn.edu/ryanbaker/EDM2014/ba5-data.txt&quot;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;response-to&quot;</span><span class="p">:</span> <span class="s2">&quot;toID&quot;</span><span class="p">})</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;toID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;toID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;Int64&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>poster</th>
      <th>thread</th>
      <th>toID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>69497</td>
      <td>1</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>44591</td>
      <td>2</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>24601</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>74570</td>
      <td>3</td>
      <td>&lt;NA&gt;</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>29022</td>
      <td>3</td>
      <td>4</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>12345</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>24601</td>
      <td>3</td>
      <td>5</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>29022</td>
      <td>3</td>
      <td>7</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>24601</td>
      <td>3</td>
      <td>8</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>74577</td>
      <td>4</td>
      <td>&lt;NA&gt;</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">notnull</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">toID</span><span class="p">)][[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;poster&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>poster</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>24601</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>29022</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>12345</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>24601</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>29022</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>192</th>
      <td>193</td>
      <td>24601</td>
    </tr>
    <tr>
      <th>193</th>
      <td>194</td>
      <td>73263</td>
    </tr>
    <tr>
      <th>194</th>
      <td>195</td>
      <td>68491</td>
    </tr>
    <tr>
      <th>195</th>
      <td>196</td>
      <td>26362</td>
    </tr>
    <tr>
      <th>196</th>
      <td>197</td>
      <td>4582</td>
    </tr>
  </tbody>
</table>
<p>150 rows × 2 columns</p>
</div></div></div>
</div>
<p>The MOOC dataset is ‘tidy’ but it is not quite in an edgelist format, because the <code class="docutils literal notranslate"><span class="pre">toID</span></code> column refers to the ID of a post instead of a student.</p>
<p>For example, row 3 of the dataframe is a response by student 24601 to post 2, which was created by student 44591.</p>
<p>To analyze student-to-student interactions, for each interaction, we need to trace the student who created the post replied by the current post.</p>
<p>For row 3, we need to add another column, named something like <code class="docutils literal notranslate"><span class="pre">receiver</span></code>, and fill it with 44591 to indicate the student who received the reply.</p>
<p>Besides this major data prep need, we also need to deal with these <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values in the <code class="docutils literal notranslate"><span class="pre">toID</span></code> column. These rows simply represent posts that were not replies. They are therefore not relevant to student-to-student interactions.</p>
<p>Finally, the last column seems to be treated as a <code class="docutils literal notranslate"><span class="pre">numeric</span></code> data type.</p>
</section>
<section id="data-prep">
<h3>Data prep<a class="headerlink" href="#data-prep" title="Link to this heading">#</a></h3>
<p>We first need to convert <code class="docutils literal notranslate"><span class="pre">toID</span></code> to <code class="docutils literal notranslate"><span class="pre">Int64</span></code> to make sure its data type is consistent with the <code class="docutils literal notranslate"><span class="pre">ID</span></code> column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;toID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;toID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;Int64&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ID        int64
poster    int64
thread    int64
toID      Int64
dtype: object
</pre></div>
</div>
</div>
</div>
<section id="prepare-nodes">
<h4>Prepare nodes<a class="headerlink" href="#prepare-nodes" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve unique student IDs</span>
<span class="n">node_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;poster&#39;</span><span class="p">])</span>

<span class="c1"># Print the total number of nodes in the graph</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">node_list</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>103
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;poster&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>poster
24601    24
12345    21
85455     4
31345     4
3903      4
         ..
84726     1
46544     1
1008      1
2739      1
4582      1
Name: count, Length: 103, dtype: int64
</pre></div>
</div>
</div>
</div>
</section>
<section id="prepare-edges">
<h4>Prepare edges<a class="headerlink" href="#prepare-edges" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove rows that do not have a receiver</span>
<span class="n">edge_list</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Create a new column receiver, by looking up values in the ID column</span>
<span class="c1"># This can be achieved using pd.merge</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">edge_list</span><span class="p">,</span> <span class="n">edge_list</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;poster&#39;</span><span class="p">]],</span> <span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;toID&#39;</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;_receiver&#39;</span><span class="p">))</span>
<span class="n">edge_list</span> <span class="o">=</span> <span class="n">tmp</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;poster_receiver&#39;</span><span class="p">:</span> <span class="s1">&#39;receiver&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;ID_receiver&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Check the edgelist</span>
<span class="n">edge_list</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>poster</th>
      <th>thread</th>
      <th>toID</th>
      <th>receiver</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>6</td>
      <td>12345</td>
      <td>3</td>
      <td>5</td>
      <td>29022</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7</td>
      <td>24601</td>
      <td>3</td>
      <td>5</td>
      <td>29022</td>
    </tr>
    <tr>
      <th>2</th>
      <td>8</td>
      <td>29022</td>
      <td>3</td>
      <td>7</td>
      <td>24601</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9</td>
      <td>24601</td>
      <td>3</td>
      <td>8</td>
      <td>29022</td>
    </tr>
    <tr>
      <th>4</th>
      <td>12</td>
      <td>12345</td>
      <td>4</td>
      <td>11</td>
      <td>24601</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>103</th>
      <td>193</td>
      <td>24601</td>
      <td>47</td>
      <td>192</td>
      <td>62306</td>
    </tr>
    <tr>
      <th>104</th>
      <td>194</td>
      <td>73263</td>
      <td>47</td>
      <td>193</td>
      <td>24601</td>
    </tr>
    <tr>
      <th>105</th>
      <td>195</td>
      <td>68491</td>
      <td>47</td>
      <td>193</td>
      <td>24601</td>
    </tr>
    <tr>
      <th>106</th>
      <td>196</td>
      <td>26362</td>
      <td>47</td>
      <td>195</td>
      <td>68491</td>
    </tr>
    <tr>
      <th>107</th>
      <td>197</td>
      <td>4582</td>
      <td>47</td>
      <td>195</td>
      <td>68491</td>
    </tr>
  </tbody>
</table>
<p>108 rows × 5 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_list</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;edgelist.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="create-a-directed-network-from-data">
<h2>Create a directed network from data<a class="headerlink" href="#create-a-directed-network-from-data" title="Link to this heading">#</a></h2>
<p>With the cleaned edge list, we can create a directed graph, and add the edge list in.</p>
<p>There is a function named <code class="docutils literal notranslate"><span class="pre">add_edges_from</span></code> that can be used to quickly add the edges all at once.</p>
<p>However, we may want to keep two columns – <code class="docutils literal notranslate"><span class="pre">ID</span></code> and <code class="docutils literal notranslate"><span class="pre">thread</span></code> – as edge attributes. So we go through the edge list row by row and add one edge at a time with its attributes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="c1"># Add nodes -- this is important because not all nodes are in edgelist</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">node_list</span><span class="p">)</span>

<span class="c1"># Add edges with attributes from the DataFrame to the graph</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">edge_list</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">G</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;poster&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;receiver&#39;</span><span class="p">],</span> <span class="nb">id</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;ID&#39;</span><span class="p">],</span> <span class="n">thread</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;thread&#39;</span><span class="p">])</span>

<span class="c1"># Generate a quick network visualization</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a9c8d0e0ac3039c819c0cfff1feaece191760f8b8bb902cbf24457649321e83a.png" src="_images/a9c8d0e0ac3039c819c0cfff1feaece191760f8b8bb902cbf24457649321e83a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">G</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>103
98
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">selfloop_edges</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(13534, 13534)]
</pre></div>
</div>
</div>
</div>
<p>This is odd, because <code class="docutils literal notranslate"><span class="pre">edge_list</span></code> has 108 rows.</p>
<p>Let’s check attributes of the edge from <code class="docutils literal notranslate"><span class="pre">8639</span></code> to <code class="docutils literal notranslate"><span class="pre">12345</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">G</span><span class="o">.</span><span class="n">get_edge_data</span><span class="p">(</span><span class="mi">8639</span><span class="p">,</span> <span class="mi">12345</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;id&#39;: 131, &#39;thread&#39;: 30}
</pre></div>
</div>
</div>
</div>
<p>It’s always a good idea to check the original dataset for any “bugs”.</p>
<p>So let’s check whether edges between these two nodes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">edge_list</span><span class="p">[(</span><span class="n">edge_list</span><span class="p">[</span><span class="s1">&#39;poster&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">8639</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">edge_list</span><span class="p">[</span><span class="s1">&#39;receiver&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">12345</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>poster</th>
      <th>thread</th>
      <th>toID</th>
      <th>receiver</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>71</th>
      <td>129</td>
      <td>8639</td>
      <td>30</td>
      <td>128</td>
      <td>12345</td>
    </tr>
    <tr>
      <th>73</th>
      <td>131</td>
      <td>8639</td>
      <td>30</td>
      <td>130</td>
      <td>12345</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Interesting!!</p>
<p>Only the edge with ID of 153 is reflected in the NetworkX graph object.</p>
<p>This warrants additional investigation.</p>
<p>Aha! – On the <a class="reference external" href="https://networkx.org/documentation/stable/reference/classes/digraph.html">DiGraph reference page</a>, there is one important sentence:</p>
<blockquote>
<div><p>DiGraphs hold directed edges. Self loops are allowed but multiple (parallel) edges are not.</p>
</div></blockquote>
<p>It seems DiGraph only allows one edge between any pair of nodes, so some data were thrown away when multiple edges are observed between two nodes.</p>
<p>We need to find a solution to deal with this issue.</p>
</section>
<section id="weighted-directed-network">
<h2>Weighted directed network<a class="headerlink" href="#weighted-directed-network" title="Link to this heading">#</a></h2>
<p>There could be multiple solutions, depending on your goal.</p>
<p>One possible solution is to create a <a class="reference external" href="https://networkx.org/documentation/stable/reference/classes/multidigraph.html"><code class="docutils literal notranslate"><span class="pre">MultiDiGraph</span></code></a> – A directed graph that can store multiedges. However, it’s probably unnecessary since we are only dealing with one type of edges.</p>
<p>Another possible solution is to merge multiple edges into one weighted edge.</p>
<p>This preserves the number of occurrences but throws away the original edge attributes such as ID and thread.</p>
<p>Whether this is a good solution, again, depends on your goal.</p>
<section id="created-a-new-edge-list-data-frame-with-a-weight-column">
<h3>Created a new edge list data frame with a <code class="docutils literal notranslate"><span class="pre">weight</span></code> column<a class="headerlink" href="#created-a-new-edge-list-data-frame-with-a-weight-column" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">el_weighted</span> <span class="o">=</span> <span class="n">edge_list</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;poster&#39;</span><span class="p">,</span> <span class="s1">&#39;receiver&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;weight&#39;</span><span class="p">)</span>
<span class="n">el_weighted</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">,</span> <span class="s1">&#39;poster&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span> <span class="c1"># Inspect the weighted edge list, sorted by weight and poster</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>poster</th>
      <th>receiver</th>
      <th>weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>8639</td>
      <td>12345</td>
      <td>2</td>
    </tr>
    <tr>
      <th>10</th>
      <td>9061</td>
      <td>3903</td>
      <td>2</td>
    </tr>
    <tr>
      <th>20</th>
      <td>12345</td>
      <td>24601</td>
      <td>2</td>
    </tr>
    <tr>
      <th>22</th>
      <td>12345</td>
      <td>47634</td>
      <td>2</td>
    </tr>
    <tr>
      <th>30</th>
      <td>21588</td>
      <td>50718</td>
      <td>2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>93</th>
      <td>87525</td>
      <td>21731</td>
      <td>1</td>
    </tr>
    <tr>
      <th>94</th>
      <td>89206</td>
      <td>86620</td>
      <td>1</td>
    </tr>
    <tr>
      <th>95</th>
      <td>97784</td>
      <td>73263</td>
      <td>1</td>
    </tr>
    <tr>
      <th>96</th>
      <td>98582</td>
      <td>10827</td>
      <td>1</td>
    </tr>
    <tr>
      <th>97</th>
      <td>98582</td>
      <td>80045</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>98 rows × 3 columns</p>
</div></div></div>
</div>
</section>
</section>
<section id="created-a-weighted-directed-network">
<h2>Created a weighted directed network<a class="headerlink" href="#created-a-weighted-directed-network" title="Link to this heading">#</a></h2>
<p>Now, with the weighted edge list, we can follow the same process and generate a new network.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">WG</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="c1"># Add nodes</span>
<span class="n">WG</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">node_list</span><span class="p">)</span>

<span class="c1"># Add edges with attributes from the DataFrame to the graph</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">el_weighted</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">WG</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;poster&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;receiver&#39;</span><span class="p">],</span> <span class="n">weight</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>

<span class="c1"># Generate a quick network visualization</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">WG</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/dd66d74587742e5dd5fb9675d98813cc102601a6281151b624a8193e46bb787d.png" src="_images/dd66d74587742e5dd5fb9675d98813cc102601a6281151b624a8193e46bb787d.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">WG</span><span class="o">.</span><span class="n">number_of_nodes</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">WG</span><span class="o">.</span><span class="n">number_of_edges</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>103
98
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">selfloop_edges</span><span class="p">(</span><span class="n">WG</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(13534, 13534, {&#39;weight&#39;: 1})]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">WG</span><span class="o">.</span><span class="n">remove_edges_from</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">selfloop_edges</span><span class="p">(</span><span class="n">WG</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s check the edge from <code class="docutils literal notranslate"><span class="pre">8639</span></code> to <code class="docutils literal notranslate"><span class="pre">12345</span></code> just to be safe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">WG</span><span class="o">.</span><span class="n">get_edge_data</span><span class="p">(</span><span class="mi">8639</span><span class="p">,</span> <span class="mi">12345</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;weight&#39;: 2}
</pre></div>
</div>
</div>
</div>
<p>By this point, you have created a directed, weighted network about student interactions in the MOOC discussion forum.</p>
</section>
<section id="example-3-importing-twitter-conversations-at-lak11">
<h2>Example 3: Importing Twitter Conversations at #LAK11<a class="headerlink" href="#example-3-importing-twitter-conversations-at-lak11" title="Link to this heading">#</a></h2>
<p>This public dataset contains tweets from the first LAK conference.</p>
<p>The dataset is stored on Google Sheet, with each row representing a tweet. The columns represent various metadata about a tweet provided by the Twitter API.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tweets</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vSHfM5O09_Pw4Rg0nOyvbk-CE1rWHBDFtEygIyretbvhnrewQDiqpQ2XI5g2vcU_fDtPYRJkhUzet3v/pub?gid=56&amp;single=true&amp;output=csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tweets</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1362 entries, 0 to 1361
Data columns (total 14 columns):
 #   Column             Non-Null Count  Dtype  
---  ------             --------------  -----  
 0   from_user          1362 non-null   object 
 1   text               1362 non-null   object 
 2   created_at         1362 non-null   object 
 3   from_user_id       1362 non-null   int64  
 4   geo_coordinates    3 non-null      object 
 5   iso_language_code  1359 non-null   object 
 6   to_user_id         219 non-null    float64
 7   id                 1362 non-null   float64
 8   to_user_id_str     219 non-null    float64
 9   source             1362 non-null   object 
 10  from_user_id_str   1362 non-null   int64  
 11  id_str             1362 non-null   float64
 12  profile_image_url  1362 non-null   object 
 13  status_url         1362 non-null   object 
dtypes: float64(4), int64(2), object(8)
memory usage: 149.1+ KB
</pre></div>
</div>
</div>
</div>
<p>The data imported from Google Sheet is almost in an edge list format.</p>
<p>Now we just need to remove those rows that are not replies. This can be done by removing rows with empty values in <code class="docutils literal notranslate"><span class="pre">to_user_id</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">replies</span> <span class="o">=</span> <span class="n">tweets</span><span class="p">[</span><span class="o">~</span><span class="n">tweets</span><span class="p">[</span><span class="s1">&#39;to_user_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()]</span>
<span class="n">replies</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>from_user</th>
      <th>text</th>
      <th>created_at</th>
      <th>from_user_id</th>
      <th>geo_coordinates</th>
      <th>iso_language_code</th>
      <th>to_user_id</th>
      <th>id</th>
      <th>to_user_id_str</th>
      <th>source</th>
      <th>from_user_id_str</th>
      <th>id_str</th>
      <th>profile_image_url</th>
      <th>status_url</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>36</th>
      <td>Anna_De_Liddo</td>
      <td>@houshuang Hi Stian! we are still in Banf, but...</td>
      <td>Thu, 03 Mar 2011 05:31:57 +0000</td>
      <td>9526430</td>
      <td>NaN</td>
      <td>en</td>
      <td>172290.0</td>
      <td>4.318180e+16</td>
      <td>172290.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.tweetdeck.com&amp;quot...</td>
      <td>9526430</td>
      <td>4.318180e+16</td>
      <td>http://a3.twimg.com/profile_images/20659452/IM...</td>
      <td>http://twitter.com/Anna_De_Liddo/statuses/4318...</td>
    </tr>
    <tr>
      <th>48</th>
      <td>psychemedia</td>
      <td>@andymcg what edu related activity data projec...</td>
      <td>Wed, 02 Mar 2011 21:03:37 +0000</td>
      <td>69223</td>
      <td>NaN</td>
      <td>en</td>
      <td>2316588.0</td>
      <td>4.305387e+16</td>
      <td>2316588.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.tweetdeck.com&amp;quot...</td>
      <td>69223</td>
      <td>4.305387e+16</td>
      <td>http://a1.twimg.com/profile_images/1195013164/...</td>
      <td>http://twitter.com/psychemedia/statuses/430538...</td>
    </tr>
    <tr>
      <th>67</th>
      <td>NicolaAvery</td>
      <td>@Anna_De_Liddo thank you, no idea how difficul...</td>
      <td>Wed, 02 Mar 2011 17:11:29 +0000</td>
      <td>13181495</td>
      <td>NaN</td>
      <td>en</td>
      <td>9526430.0</td>
      <td>4.299545e+16</td>
      <td>9526430.0</td>
      <td>&amp;lt;a href=&amp;quot;http://twitter.com/&amp;quot;&amp;gt;...</td>
      <td>13181495</td>
      <td>4.299545e+16</td>
      <td>http://a3.twimg.com/profile_images/797991041/n...</td>
      <td>http://twitter.com/NicolaAvery/statuses/429954...</td>
    </tr>
    <tr>
      <th>70</th>
      <td>Anna_De_Liddo</td>
      <td>@NicolaAvery and btw this is a nice idea/featu...</td>
      <td>Wed, 02 Mar 2011 16:51:48 +0000</td>
      <td>9526430</td>
      <td>NaN</td>
      <td>en</td>
      <td>13181495.0</td>
      <td>4.299050e+16</td>
      <td>13181495.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.tweetdeck.com&amp;quot...</td>
      <td>9526430</td>
      <td>4.299050e+16</td>
      <td>http://a3.twimg.com/profile_images/20659452/IM...</td>
      <td>http://twitter.com/Anna_De_Liddo/statuses/4299...</td>
    </tr>
    <tr>
      <th>71</th>
      <td>Anna_De_Liddo</td>
      <td>@NicolaAvery you can see, edit/manage your tag...</td>
      <td>Wed, 02 Mar 2011 16:50:53 +0000</td>
      <td>9526430</td>
      <td>NaN</td>
      <td>en</td>
      <td>13181495.0</td>
      <td>4.299027e+16</td>
      <td>13181495.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.tweetdeck.com&amp;quot...</td>
      <td>9526430</td>
      <td>4.299027e+16</td>
      <td>http://a3.twimg.com/profile_images/20659452/IM...</td>
      <td>http://twitter.com/Anna_De_Liddo/statuses/4299...</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1327</th>
      <td>houshuang</td>
      <td>@sbskmi @psychemedia Looking forward to seeing...</td>
      <td>Sat, 26 Feb 2011 01:55:04 +0000</td>
      <td>172290</td>
      <td>NaN</td>
      <td>en</td>
      <td>19130020.0</td>
      <td>4.131530e+16</td>
      <td>19130020.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.tweetdeck.com&amp;quot...</td>
      <td>172290</td>
      <td>4.131530e+16</td>
      <td>http://a3.twimg.com/profile_images/52634283/51...</td>
      <td>http://twitter.com/houshuang/statuses/41315277...</td>
    </tr>
    <tr>
      <th>1328</th>
      <td>houshuang</td>
      <td>@sebpaquet in banff for  #LAK11 back wednesday...</td>
      <td>Sat, 26 Feb 2011 01:50:49 +0000</td>
      <td>172290</td>
      <td>NaN</td>
      <td>en</td>
      <td>386316.0</td>
      <td>4.131421e+16</td>
      <td>386316.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.tweetdeck.com&amp;quot...</td>
      <td>172290</td>
      <td>4.131421e+16</td>
      <td>http://a3.twimg.com/profile_images/52634283/51...</td>
      <td>http://twitter.com/houshuang/statuses/41314208...</td>
    </tr>
    <tr>
      <th>1338</th>
      <td>houshuang</td>
      <td>@dougclow I'm here now, it's actually not that...</td>
      <td>Fri, 25 Feb 2011 21:47:36 +0000</td>
      <td>172290</td>
      <td>NaN</td>
      <td>en</td>
      <td>308967.0</td>
      <td>4.125300e+16</td>
      <td>308967.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.nambu.com/&amp;quot; r...</td>
      <td>172290</td>
      <td>4.125300e+16</td>
      <td>http://a3.twimg.com/profile_images/52634283/51...</td>
      <td>http://twitter.com/houshuang/statuses/41253000...</td>
    </tr>
    <tr>
      <th>1358</th>
      <td>gsiemens</td>
      <td>@JonElmSherrill :). Aparrently, it's supposed ...</td>
      <td>Thu, 24 Feb 2011 20:30:42 +0000</td>
      <td>5748</td>
      <td>NaN</td>
      <td>en</td>
      <td>237016721.0</td>
      <td>4.087126e+16</td>
      <td>237016721.0</td>
      <td>&amp;lt;a href=&amp;quot;http://www.tweetdeck.com&amp;quot...</td>
      <td>5748</td>
      <td>4.087126e+16</td>
      <td>http://a3.twimg.com/profile_images/1238005253/...</td>
      <td>http://twitter.com/gsiemens/statuses/408712594...</td>
    </tr>
    <tr>
      <th>1361</th>
      <td>weisblatt</td>
      <td>@davecormier your blog and videos make partici...</td>
      <td>Thu, 24 Feb 2011 16:15:23 +0000</td>
      <td>2290211</td>
      <td>NaN</td>
      <td>en</td>
      <td>153639.0</td>
      <td>4.080701e+16</td>
      <td>153639.0</td>
      <td>&amp;lt;a href=&amp;quot;http://twitter.com/&amp;quot;&amp;gt;...</td>
      <td>2290211</td>
      <td>4.080701e+16</td>
      <td>http://a0.twimg.com/profile_images/907710761/s...</td>
      <td>http://twitter.com/weisblatt/statuses/40807007...</td>
    </tr>
  </tbody>
</table>
<p>219 rows × 14 columns</p>
</div></div></div>
</div>
<p>With the edge list created, we can use <code class="docutils literal notranslate"><span class="pre">from_pandas_edgelist</span></code> to create a directed graph.</p>
<p>Note here we do not need a separate node list because all nodes are included in the edge list. In other cases, there are nodes not present in the edge and you will need to create a separate node list (like the first example).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">replyG</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">from_pandas_edgelist</span><span class="p">(</span>
    <span class="n">replies</span><span class="p">,</span>
    <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;from_user_id&quot;</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="s2">&quot;to_user_id&quot;</span><span class="p">,</span>
    <span class="n">edge_attr</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">],</span>
    <span class="n">create_using</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">(),</span>
<span class="p">)</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">replyG</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d3118692c8daa403feee636cb7b6f6517fa1d19d75037977c5c96f3e7b57c246.png" src="_images/d3118692c8daa403feee636cb7b6f6517fa1d19d75037977c5c96f3e7b57c246.png" />
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="ch6-understand-data-structures.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Understanding Network Data Structures</p>
      </div>
    </a>
    <a class="right-next"
       href="ch7-sociograms-density.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Sociograms, Density, and Network Connectivity</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#read-data-and-preparing-data-for-networkx">Read data and preparing data for NetworkX</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-1-reading-well-formatted-network-data-from-csv">Example 1: Reading Well-formatted Network Data from CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-2-analyzing-learner-interactions-in-mooc-discussion-forums">Example 2: Analyzing Learner Interactions in MOOC Discussion Forums</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-first-load-the-mooc-dataset-and-take-a-look">Let’s first load the MOOC dataset and take a look</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-prep">Data prep</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prepare-nodes">Prepare nodes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prepare-edges">Prepare edges</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-directed-network-from-data">Create a directed network from data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#weighted-directed-network">Weighted directed network</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#created-a-new-edge-list-data-frame-with-a-weight-column">Created a new edge list data frame with a <code class="docutils literal notranslate"><span class="pre">weight</span></code> column</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#created-a-weighted-directed-network">Created a weighted directed network</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-3-importing-twitter-conversations-at-lak11">Example 3: Importing Twitter Conversations at #LAK11</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Bodong Chen
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>